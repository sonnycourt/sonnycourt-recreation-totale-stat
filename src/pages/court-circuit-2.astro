---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="La NewsLetter court-circuit - Sonny Court" 
  description="1 minute de lecture par email pour court-circuiter tes anciens sch√©mas. Mindset, Manifestation Haute performance & plus... Rejoins les +10 000 lecteurs du matin."
  showHeader={false}
  showFooter={false}
>
  <div id="court-circuit-page">
    <!-- Background Effects -->
    <div class="background-effects">
      <div class="gradient-mesh"></div>
      <div class="depth-layers">
        <div class="depth-circle orb1"></div>
        <div class="depth-circle orb2"></div>
      </div>
      <div class="subconscious-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
      </div>
    </div>

    <!-- Hero Section -->
    <section class="court-circuit-hero">
      <div class="hero-content">
        <div class="newsletter-badge">
          <span>La NewsLetter court-circuit</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="zap-icon">
            <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"/>
          </svg>
        </div>
        <h1>La premi√®re chose que tu lis <span class="highlight-blue">chaque matin</span> transforme <span class="highlight-blue">ta journ√©e</span>.</h1>
        <p class="hero-subtitle">
          Chaque matin, un email pour court-circuiter tes pens√©es limitantes.<br>
          Rejoins <span class="highlight">+<span id="counter">0</span></span> lecteurs.
        </p>
        <div class="badges-row">
          <span class="mini-badge">1 minute</span>
          <span class="mini-badge">1 id√©e</span>
          <span class="mini-badge">1 meme</span>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <section class="court-circuit-content">
      <div class="container">
        <div class="form-section" id="formSection">
          <h2>S'inscrire √† Court-Circuit</h2>
          <p class="form-description">Remplis le formulaire et re√ßois ton premier email maintenant</p>
          
          <form id="inscriptionForm" class="inscription-form">
            <div class="form-group">
              <label for="name">Pr√©nom *</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required 
                placeholder="Ton pr√©nom"
              />
            </div>
            
            <div class="form-group">
              <label for="email">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required 
                placeholder="ton@email.com"
              />
            </div>
            
            <button type="submit" class="submit-button">
              <span>Recevoir le premier email</span>
            </button>
            
            <div id="formMessage" class="form-message"></div>
          </form>
        </div>

        <!-- Quiz Overlay -->
        <div id="quizOverlay" class="quiz-overlay" style="display: none;">
          <!-- Quiz Component -->
          <div id="quizSection" class="quiz-section">
            <!-- Progress Bar -->
            <div class="quiz-progress">
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
              <span class="progress-text" id="progressText">0/5</span>
            </div>

          <!-- Quiz Intro -->
          <div class="quiz-screen" id="quizIntro">
            <div class="quiz-intro-content">
              <p class="quiz-intro-subtitle">Quiz ¬∑ Moins de 2 minutes</p>
              <p class="quiz-intro-text">Pour finaliser ton inscription √† Court-Circuit et que je puisse t'aider au mieux, r√©ponds √† ces 5 questions.</p>
              <p class="quiz-intro-highlight">Je lis personnellement chaque r√©ponse.</p>
              <button type="button" class="quiz-button" id="startQuizBtn">Commencer le Quiz</button>
            </div>
            <img src="/media/pages/sonny-quiz-1.webp" alt="Sonny Quiz" class="quiz-intro-image">
          </div>

          <!-- Question 1 -->
          <div class="quiz-screen" id="question1" style="display: none;">
            <div class="quiz-question-content">
              <h3 class="quiz-question-title">Qu'est-ce que tu veux le plus en ce moment ?</h3>
              <div class="quiz-options">
                <label class="quiz-option">
                  <input type="radio" name="objectif" value="Avoir confiance en moi" required>
                  <span>Avoir confiance en moi</span>
                </label>
                <label class="quiz-option">
                  <input type="radio" name="objectif" value="Lancer un projet / gagner plus d'argent">
                  <span>Lancer un projet / gagner plus d'argent</span>
                </label>
                <label class="quiz-option">
                  <input type="radio" name="objectif" value="Trouver l'amour / am√©liorer mes relations">
                  <span>Trouver l'amour / am√©liorer mes relations</span>
                </label>
                <label class="quiz-option">
                  <input type="radio" name="objectif" value="Arr√™ter de procrastiner / √™tre disciplin√©">
                  <span>Arr√™ter de procrastiner / √™tre disciplin√©</span>
                </label>
              </div>
              <div class="quiz-buttons-container">
                <button type="button" class="quiz-button" id="nextBtn1">Continuer</button>
              </div>
              <div id="errorMsg1" class="quiz-error-message" style="display: none;">Cocher une r√©ponse avant de continuer</div>
            </div>
          </div>

          <!-- Question 2 -->
          <div class="quiz-screen" id="question2" style="display: none;">
            <div class="quiz-question-content">
              <h3 class="quiz-question-title">O√π tu en es aujourd'hui ?</h3>
              <div class="quiz-options">
                <label class="quiz-option">
                  <input type="radio" name="situation" value="debute" required>
                  <span>Je d√©bute, je cherche encore ma voie</span>
                </label>
                <label class="quiz-option">
                  <input type="radio" name="situation" value="bloque">
                  <span>Je suis bloqu√© depuis un moment, √ßa avance pas</span>
                </label>
                <label class="quiz-option">
                  <input type="radio" name="situation" value="tout_essaye">
                  <span>J'ai d√©j√† tout essay√©, rien ne marche vraiment</span>
                </label>
                <label class="quiz-option">
                  <input type="radio" name="situation" value="pret_changer">
                  <span>Je suis pr√™t √† tout changer, il me manque juste la m√©thode</span>
                </label>
              </div>
              <div class="quiz-buttons-container">
                <button type="button" class="quiz-button quiz-button-secondary" id="prevBtn2">Pr√©c√©dent</button>
                <button type="button" class="quiz-button" id="nextBtn2">Continuer</button>
              </div>
              <div id="errorMsg2" class="quiz-error-message" style="display: none;">Cocher une r√©ponse avant de continuer</div>
            </div>
          </div>

          <!-- Question 3 -->
          <div class="quiz-screen" id="question3" style="display: none;">
            <div class="quiz-question-content">
              <h3 class="quiz-question-title">Qu'est-ce que tu as d√©j√† accompli dont tu es fier ?</h3>
              <textarea 
                class="quiz-textarea" 
                id="fierte" 
                name="fierte" 
                placeholder="C'est pas le moment d'√™tre humble... ;) Un dipl√¥me, un d√©fi relev√©, une habitude chang√©e... tout compte." 
                rows="5" 
                required
              ></textarea>
              <div class="quiz-buttons-container">
                <button type="button" class="quiz-button quiz-button-secondary" id="prevBtn3">Pr√©c√©dent</button>
                <button type="button" class="quiz-button" id="nextBtn3">Continuer</button>
              </div>
            </div>
          </div>

          <!-- Question 4 -->
          <div class="quiz-screen" id="question4" style="display: none;">
            <div class="quiz-question-content">
              <h3 class="quiz-question-title">Dans ta vie id√©ale, tu te vois comment ?</h3>
              <textarea 
                class="quiz-textarea" 
                id="reve" 
                name="reve" 
                placeholder="Ferme les yeux 3 secondes et imagine... C'est √† quoi ressemble ta vie id√©ale ? D√©cris-moi tout, sans filtre." 
                rows="5" 
                required
              ></textarea>
              <div class="quiz-buttons-container">
                <button type="button" class="quiz-button quiz-button-secondary" id="prevBtn4">Pr√©c√©dent</button>
                <button type="button" class="quiz-button" id="nextBtn4">Continuer</button>
              </div>
            </div>
          </div>

          <!-- Question 5 -->
          <div class="quiz-screen" id="question5" style="display: none;">
            <div class="quiz-question-content">
              <h3 class="quiz-question-title">Qu'est-ce qui te fait le plus souffrir en ce moment ?</h3>
              <textarea 
                class="quiz-textarea" 
                id="souffrance" 
                name="souffrance" 
                placeholder="Ici c'est safe, je suis le seul √† lire et tes r√©ponses restent strictement confidentielles. Dis-moi ce qui te p√®se vraiment en ce moment..." 
                rows="5" 
                required
              ></textarea>
              <div class="quiz-buttons-container">
                <button type="button" class="quiz-button quiz-button-secondary" id="prevBtn5">Pr√©c√©dent</button>
                <button type="button" class="quiz-button" id="nextBtn5">Continuer</button>
              </div>
            </div>
          </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>

<style>
  #court-circuit-page {
    background: #0a0a0a;
    color: #ffffff;
    position: relative;
    overflow-x: hidden;
    min-height: 100vh;
  }

  /* Background Effects */
  .background-effects {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    min-height: 100%;
    z-index: 0;
    pointer-events: none;
    overflow: hidden;
  }

  /* S'assurer que le background couvre aussi le footer */
  :global(body) {
    background: #0a0a0a !important;
  }

  :global(html) {
    background: #0a0a0a !important;
  }

  .gradient-mesh {
    position: fixed;
    width: 200vw;
    height: 300vh;
    top: -50vh;
    left: -50vw;
    background: 
      radial-gradient(circle at 20% 30%, rgba(0, 122, 255, 0.15) 0%, transparent 60%),
      radial-gradient(circle at 80% 70%, rgba(0, 122, 255, 0.08) 0%, transparent 70%),
      radial-gradient(circle at 40% 20%, rgba(0, 122, 255, 0.05) 0%, transparent 80%),
      radial-gradient(circle at 60% 80%, rgba(0, 122, 255, 0.03) 0%, transparent 90%),
      radial-gradient(circle at 50% 150%, rgba(0, 122, 255, 0.08) 0%, transparent 60%),
      radial-gradient(circle at 30% 200%, rgba(0, 81, 213, 0.05) 0%, transparent 70%);
    filter: blur(60px);
    opacity: 0.7;
    animation: meshMove 40s ease-in-out infinite;
  }

  @keyframes meshMove {
    0%, 100% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(-5%, -5%) scale(1.05); }
    50% { transform: translate(5%, 5%) scale(1.1); }
    75% { transform: translate(-3%, 3%) scale(1.05); }
  }

  .depth-layers {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .depth-circle {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0.4;
    animation: orbFloat 20s ease-in-out infinite;
  }

  .orb1 {
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(0, 122, 255, 0.6) 0%, transparent 70%);
    top: 10%;
    left: 10%;
    animation-delay: 0s;
  }

  .orb2 {
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, rgba(0, 81, 213, 0.5) 0%, transparent 70%);
    bottom: 10%;
    right: 10%;
    animation-delay: 10s;
  }

  @keyframes orbFloat {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(50px, -50px) scale(1.1); }
  }

  .subconscious-particles {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .particle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: rgba(0, 122, 255, 0.4);
    border-radius: 50%;
    animation: particleFloat 15s ease-in-out infinite;
    box-shadow: 0 0 6px rgba(0, 122, 255, 0.3);
  }

  .particle:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
  .particle:nth-child(2) { top: 20%; left: 80%; animation-delay: 2s; }
  .particle:nth-child(3) { top: 60%; left: 20%; animation-delay: 4s; }
  .particle:nth-child(4) { top: 80%; left: 70%; animation-delay: 6s; }
  .particle:nth-child(5) { top: 40%; left: 50%; animation-delay: 8s; }
  .particle:nth-child(6) { top: 30%; left: 30%; animation-delay: 10s; }
  .particle:nth-child(7) { top: 70%; left: 60%; animation-delay: 12s; }
  .particle:nth-child(8) { top: 50%; left: 90%; animation-delay: 14s; }

  @keyframes particleFloat {
    0%, 100% {
      transform: translateY(0) translateX(0);
      opacity: 0.4;
    }
    50% {
      transform: translateY(-30px) translateX(30px);
      opacity: 0.8;
    }
  }

  .court-circuit-hero {
    padding: 120px 20px 40px;
    text-align: center;
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .newsletter-badge {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 28px;
    background: rgba(22, 33, 62, 0.4);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(0, 122, 255, 0.3);
    border-radius: 50px;
    color: #007AFF;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 24px;
    box-shadow: 0 8px 32px rgba(0, 122, 255, 0.1);
    transition: all 0.3s ease;
  }

  .newsletter-badge:hover {
    border-color: rgba(0, 122, 255, 0.5);
    box-shadow: 0 12px 40px rgba(0, 122, 255, 0.2);
    transform: translateY(-2px);
  }

  .newsletter-badge .zap-icon {
    color: #007AFF;
    flex-shrink: 0;
    animation: zapPulse 2s ease-in-out infinite;
  }

  @keyframes zapPulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.1);
    }
  }

  .badges-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-top: 32px;
    margin-bottom: 0;
    flex-wrap: wrap;
  }

  .mini-badge {
    padding: 14px 28px;
    background: linear-gradient(135deg, rgba(0, 122, 255, 0.15) 0%, rgba(0, 81, 213, 0.2) 100%);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(0, 122, 255, 0.5);
    border-radius: 50px;
    color: #007AFF;
    font-weight: 700;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 
      0 4px 20px rgba(0, 122, 255, 0.3),
      0 0 0 1px rgba(0, 122, 255, 0.1) inset,
      0 0 30px rgba(0, 122, 255, 0.15);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .mini-badge::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
  }

  .mini-badge:hover {
    border-color: rgba(0, 122, 255, 0.8);
    background: linear-gradient(135deg, rgba(0, 122, 255, 0.25) 0%, rgba(0, 81, 213, 0.3) 100%);
    box-shadow: 
      0 8px 40px rgba(0, 122, 255, 0.5),
      0 0 0 1px rgba(0, 122, 255, 0.2) inset,
      0 0 50px rgba(0, 122, 255, 0.3);
    transform: translateY(-3px) scale(1.05);
    color: #2D9AFF;
  }

  .mini-badge:hover::before {
    left: 100%;
  }

  .badge-separator {
    color: rgba(255, 255, 255, 0.4);
    font-size: 1.1rem;
    font-weight: 300;
    margin: 0 4px;
  }

  .hero-content {
    position: relative;
    z-index: 2;
    max-width: 1000px;
    margin: 0 auto;
  }

  .hero-content h1 {
    font-size: clamp(2.5rem, 6vw, 4.5rem);
    font-weight: 700;
    margin-bottom: 20px;
    line-height: 1.2;
    color: #ffffff;
    text-shadow: 0 0 30px rgba(0, 122, 255, 0.3);
  }

  .hero-content h1 .highlight-blue {
    color: #007AFF;
    background: linear-gradient(135deg, #2D9AFF 0%, #007AFF 50%, #4DA3FF 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-subtitle {
    font-size: clamp(1.1rem, 2.5vw, 1.4rem);
    color: #a0a0a0;
    margin: 0;
    line-height: 1.6;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 0;
  }

  .hero-subtitle .highlight {
    color: #007AFF;
    font-weight: 700;
    background: linear-gradient(135deg, #007AFF 0%, #0051D5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-subtitle .coffee-icon {
    display: inline-block;
    vertical-align: middle;
    margin-left: 8px;
    color: #007AFF;
    animation: coffeeFloat 3s ease-in-out infinite;
  }

  @keyframes coffeeFloat {
    0%, 100% {
      transform: translateY(0) rotate(0deg);
    }
    50% {
      transform: translateY(-5px) rotate(5deg);
    }
  }

  .court-circuit-content {
    padding: 40px 20px 60px;
    position: relative;
    z-index: 1;
  }

  .container {
    max-width: 800px;
    margin: 0 auto;
  }

  .form-section {
    background: rgba(22, 33, 62, 0.4);
    border: 1px solid rgba(0, 122, 255, 0.3);
    border-radius: 24px;
    padding: 50px;
    backdrop-filter: blur(20px);
    box-shadow: 
      0 8px 32px rgba(0, 122, 255, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
  }

  .form-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(0, 122, 255, 0.5), transparent);
  }

  .form-section h2 {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    margin-bottom: 10px;
    color: #ffffff;
    text-align: center;
    font-weight: 700;
  }

  .form-description {
    text-align: center;
    color: #a0a0a0;
    margin-bottom: 40px;
    font-size: 1rem;
  }

  .inscription-form {
    display: flex;
    flex-direction: column;
    gap: 25px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .form-group label {
    color: #ffffff;
    font-weight: 600;
    font-size: 0.95rem;
  }

  .form-group input {
    padding: 16px 22px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 14px;
    color: #ffffff;
    font-size: 1rem;
    transition: all 0.3s ease;
    font-family: inherit;
    backdrop-filter: blur(10px);
  }

  .form-group input::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }

  .form-group input:focus {
    outline: none;
    border-color: #007AFF;
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 0 0 3px rgba(0, 122, 255, 0.15),
      0 4px 12px rgba(0, 122, 255, 0.1);
    transform: translateY(-1px);
  }

  .submit-button {
    margin-top: 10px;
    padding: 20px 50px;
    background: linear-gradient(135deg, #007AFF 0%, #0051D5 50%, #007AFF 100%);
    background-size: 200% 200%;
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 
      0 10px 30px rgba(0, 122, 255, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
  }

  .submit-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
  }

  .submit-button:hover {
    transform: translateY(-3px) scale(1.02);
    background-position: 100% 100%;
    box-shadow: 
      0 15px 40px rgba(0, 122, 255, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .submit-button:hover::before {
    left: 100%;
  }

  .submit-button:active {
    transform: translateY(-1px) scale(1);
  }

  .form-message {
    margin-top: 20px;
    padding: 15px;
    border-radius: 12px;
    text-align: center;
    font-weight: 500;
    display: none;
  }

  .form-message.success {
    display: block;
    background: rgba(34, 197, 94, 0.2);
    border: 1px solid rgba(34, 197, 94, 0.4);
    color: #4ade80;
  }

  .form-message.error {
    display: block;
    background: rgba(239, 68, 68, 0.2);
    border: 1px solid rgba(239, 68, 68, 0.4);
    color: #f87171;
  }

  /* Quiz Overlay */
  .quiz-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeInOverlay 0.3s ease;
  }

  @keyframes fadeInOverlay {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Quiz Styles */
  .quiz-section {
    background: rgba(22, 33, 62, 0.95);
    border: 1px solid rgba(0, 122, 255, 0.4);
    border-radius: 24px;
    padding: 50px 50px 0;
    backdrop-filter: blur(20px);
    box-shadow: 
      0 20px 60px rgba(0, 0, 0, 0.5),
      0 8px 32px rgba(0, 122, 255, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    position: relative;
    max-width: 800px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    overflow-x: hidden;
    animation: slideInPopup 0.4s ease;
  }

  @keyframes slideInPopup {
    from {
      opacity: 0;
      transform: scale(0.9) translateY(20px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .quiz-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(0, 122, 255, 0.5), transparent);
  }

  .quiz-progress {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 40px;
    gap: 20px;
  }

  .progress-bar {
    flex: 1;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #007AFF 0%, #0051D5 100%);
    border-radius: 10px;
    transition: width 0.5s ease;
    width: 0%;
  }

  .progress-text {
    color: #007AFF;
    font-weight: 600;
    font-size: 0.9rem;
    min-width: 40px;
    text-align: right;
  }

  .quiz-screen {
    animation: fadeIn 0.4s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .quiz-intro-content {
    text-align: center;
    padding: 40px 20px;
  }

  .quiz-intro-subtitle {
    font-size: 0.9rem;
    color: #007AFF;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 20px;
  }

  .quiz-intro-text {
    font-size: clamp(1.2rem, 3vw, 1.5rem);
    color: #ffffff;
    line-height: 1.6;
    margin-bottom: 20px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .quiz-intro-highlight {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    color: #007AFF;
    line-height: 1.6;
    margin: 20px auto 40px;
    max-width: 500px;
    padding: 16px 24px;
    background: rgba(0, 122, 255, 0.1);
    border: 1px solid rgba(0, 122, 255, 0.3);
    border-radius: 12px;
    backdrop-filter: blur(10px);
    text-align: center;
    font-weight: 600;
  }

  .quiz-intro-image {
    display: block;
    max-width: 200px;
    width: 100%;
    height: auto;
    margin: 30px auto 0;
    margin-bottom: -24px;
    position: relative;
    z-index: 1;
  }

  .quiz-question-content {
    text-align: center;
  }

  .quiz-question-title {
    font-size: clamp(1.5rem, 4vw, 2rem);
    color: #ffffff;
    margin-bottom: 40px;
    line-height: 1.4;
    font-weight: 700;
  }

  .quiz-options {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 40px;
    text-align: left;
  }

  .quiz-option {
    display: flex;
    align-items: center;
    padding: 20px 24px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .quiz-option:hover {
    border-color: rgba(0, 122, 255, 0.5);
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-2px);
  }

  .quiz-option input[type="radio"] {
    width: 20px;
    height: 20px;
    margin-right: 16px;
    cursor: pointer;
    accent-color: #007AFF;
    flex-shrink: 0;
  }

  .quiz-option span {
    color: #ffffff;
    font-size: 1.1rem;
    line-height: 1.6;
    flex: 1;
  }

  .quiz-option input[type="radio"]:checked + span {
    color: #007AFF;
    font-weight: 600;
  }

  .quiz-option:has(input[type="radio"]:checked) {
    border-color: #007AFF;
    background: rgba(0, 122, 255, 0.1);
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.15);
  }

  .quiz-textarea {
    width: 100%;
    padding: 20px 24px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 14px;
    color: #ffffff;
    font-size: 1rem;
    font-family: inherit;
    line-height: 1.6;
    resize: vertical;
    min-height: 120px;
    margin-bottom: 40px;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
  }

  .quiz-textarea::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }

  .quiz-textarea:focus {
    outline: none;
    border-color: #007AFF;
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 0 0 3px rgba(0, 122, 255, 0.15),
      0 4px 12px rgba(0, 122, 255, 0.1);
  }

  .quiz-button {
    padding: 20px 50px;
    background: linear-gradient(135deg, #007AFF 0%, #0051D5 50%, #007AFF 100%);
    background-size: 200% 200%;
    color: white;
    border: none;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 
      0 10px 30px rgba(0, 122, 255, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
  }

  .quiz-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
  }

  .quiz-button:hover {
    transform: translateY(-3px) scale(1.02);
    background-position: 100% 100%;
    box-shadow: 
      0 15px 40px rgba(0, 122, 255, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .quiz-button:hover::before {
    left: 100%;
  }

  .quiz-button:active {
    transform: translateY(-1px) scale(1);
  }

  .quiz-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }

  .quiz-buttons-container {
    display: flex;
    gap: 16px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 40px;
  }

  .quiz-button-secondary {
    background: rgba(255, 255, 255, 0.1) !important;
    border: 2px solid rgba(255, 255, 255, 0.3) !important;
    color: #ffffff !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
  }

  .quiz-button-secondary:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.5) !important;
    transform: translateY(-2px) scale(1.01);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3) !important;
  }

  .quiz-error-message {
    margin-top: 16px;
    padding: 12px 20px;
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid rgba(239, 68, 68, 0.4);
    border-radius: 12px;
    color: #f87171;
    font-size: 0.95rem;
    text-align: center;
    animation: slideDown 0.3s ease;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (max-width: 768px) {
    .court-circuit-hero {
      padding: 100px 20px 30px;
    }

    .newsletter-badge {
      margin-bottom: 20px;
      padding: 10px 22px;
      font-size: 0.85rem;
    }

    .hero-content h1 {
      margin-bottom: 16px;
    }

    .hero-subtitle {
      font-size: clamp(1rem, 2vw, 1.2rem);
      line-height: 1.5;
    }

    .court-circuit-content {
      padding: 30px 20px 40px;
    }

    .form-section {
      padding: 30px 20px;
    }

    .submit-button {
      padding: 16px 30px;
      font-size: 1rem;
    }

    .quiz-overlay {
      padding: 10px;
    }

    .quiz-section {
      padding: 30px 20px 0;
      max-height: 95vh;
    }

    .quiz-intro-image {
      max-width: 150px;
      margin: 20px auto 0;
      margin-bottom: -24px;
    }

    .quiz-intro-text {
      font-size: clamp(1rem, 3vw, 1.2rem);
      margin-bottom: 30px;
    }

    .quiz-question-title {
      font-size: clamp(1.2rem, 4vw, 1.5rem);
      margin-bottom: 30px;
    }

    .quiz-option {
      padding: 16px 20px;
    }

    .quiz-option span {
      font-size: 0.95rem;
    }

    .quiz-button {
      padding: 16px 30px;
      font-size: 1rem;
    }

    .quiz-buttons-container {
      flex-direction: column;
      gap: 12px;
      margin-bottom: 30px;
    }

    .quiz-button-secondary,
    .quiz-button {
      width: 100%;
    }

    .quiz-textarea {
      padding: 16px 20px;
      min-height: 100px;
    }
  }
</style>

<script>
  // Compteur anim√© pour le nombre de lecteurs
  (function() {
    const counterElement = document.getElementById('counter');
    if (!counterElement) return;
    
    const targetValue = 10000;
    const duration = 2000; // 2 secondes
    const startTime = Date.now();
    const startValue = 0;
    
    function animateCounter() {
      const now = Date.now();
      const elapsed = now - startTime;
      const progress = Math.min(elapsed / duration, 1);
      
      // Easing function pour un effet plus naturel (ease-out)
      const easeOutQuart = 1 - Math.pow(1 - progress, 4);
      
      const currentValue = Math.floor(startValue + (targetValue - startValue) * easeOutQuart);
      
      // Formater avec espaces pour les milliers
      counterElement.textContent = currentValue.toLocaleString('fr-FR').replace(/\s/g, ' ');
      
      if (progress < 1) {
        requestAnimationFrame(animateCounter);
      } else {
        // S'assurer qu'on arrive exactement √† la valeur cible
        counterElement.textContent = targetValue.toLocaleString('fr-FR').replace(/\s/g, ' ');
      }
    }
    
    // D√©marrer l'animation apr√®s un petit d√©lai pour que la page soit charg√©e
    setTimeout(() => {
      requestAnimationFrame(animateCounter);
    }, 300);
  })();

  // Fonction pour d√©tecter le pays via API
  async function detectCountry() {
    try {
      const response = await fetch('https://ipapi.co/json/');
      const data = await response.json();
      return data.country_name || data.country || null;
    } catch (error) {
      console.error('Erreur d√©tection pays:', error);
      return null;
    }
  }

  const form = document.getElementById('inscriptionForm');
  const messageDiv = document.getElementById('formMessage');

  if (form && messageDiv) {
    form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(form);
    const email = formData.get('email') as string;
    const prenom = formData.get('name') || formData.get('prenom');
    
    // D√©tecter le pays
    const country = await detectCountry();
    
    // G√©n√©rer un token unique pour Court-Circuit et le sauvegarder dans localStorage
    const uniqueTokenCC = crypto.randomUUID();
    localStorage.setItem('cc_subscription_token', uniqueTokenCC);
    
    const data = {
      email: email,
      prenom: prenom,
      // TEMPORAIRE : Groupe TEST pour valider l'automation
      groupId: '176767509848917590',
      // ANCIEN GROUPE (√† remettre apr√®s validation du test) :
      // groupId: '173790390929851793',
      country: country,
      uniqueTokenCC: uniqueTokenCC
    };

    // R√©initialiser le message
    messageDiv.className = 'form-message';
    messageDiv.textContent = '';

    // D√©sactiver le bouton pendant l'envoi
    const submitButton = form.querySelector('.submit-button');
    if (!submitButton) return;
    
    const buttonSpan = submitButton.querySelector('span');
    if (!buttonSpan) return;
    
    const originalButtonText = buttonSpan.textContent;
    submitButton.disabled = true;
    buttonSpan.textContent = 'Envoi en cours...';

    try {
      // V√©rifier si on est en local ou en production
      const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
      
      // Sauvegarder email et pr√©nom dans localStorage pour le quiz
      localStorage.setItem('quizEmail', email);
      localStorage.setItem('quizPrenom', prenom || '');

      if (isLocal) {
        // Simulation en local pour le d√©veloppement
        await new Promise(resolve => setTimeout(resolve, 1500));
        console.log('üß™ Mode local : Simulation d\'inscription', data);
        
        // Lancer le timer de 5 jours pour pack-complet (m√™me en local)
        const timerStart = Date.now();
        const timerDuration = 5 * 24 * 60 * 60 * 1000; // 5 jours en millisecondes
        const timerEnd = timerStart + timerDuration;
        localStorage.setItem('pack_complet_timer_start', timerStart.toString());
        localStorage.setItem('pack_complet_timer_end', timerEnd.toString());
        console.log('‚è∞ Timer de 5 jours lanc√© pour pack-complet (mode local)');
        
        // Afficher le Quiz au lieu de rediriger
        showQuiz();
        return;
      }

      // Appel √† l'API MailerLite via Netlify Function
      const response = await fetch('/.netlify/functions/subscribe', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
      });

      // R√©activer le bouton
      submitButton.disabled = false;
      buttonSpan.textContent = originalButtonText || 'Essaie maintenant';

      if (response.ok) {
        // Appel au webhook n8n pour d√©clencher l'email de bienvenue
        try {
          await fetch('https://n8n.sonnycourt.com/webhook/ebe808c2-e48d-4052-b229-a55e642f3841', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              email: formData.get('email'),
              name: formData.get('name') || formData.get('prenom')
            })
          });
        } catch (webhookError) {
          // On continue m√™me si le webhook √©choue (ne pas bloquer la redirection)
          console.error('Erreur webhook n8n:', webhookError);
        }
        
        // Sauvegarder email et pr√©nom dans localStorage pour le quiz
        localStorage.setItem('quizEmail', email);
        localStorage.setItem('quizPrenom', prenom || '');
        
        // Lancer le timer de 5 jours pour pack-complet
        const timerStart = Date.now();
        const timerDuration = 5 * 24 * 60 * 60 * 1000; // 5 jours en millisecondes
        const timerEnd = timerStart + timerDuration;
        localStorage.setItem('pack_complet_timer_start', timerStart.toString());
        localStorage.setItem('pack_complet_timer_end', timerEnd.toString());
        console.log('‚è∞ Timer de 5 jours lanc√© pour pack-complet');
        
        // Afficher le Quiz au lieu de rediriger
        showQuiz();
      } else {
        const result = await response.json().catch(() => ({}));
        messageDiv.textContent = result.message || result.error || 'Une erreur est survenue. Veuillez r√©essayer.';
        messageDiv.classList.add('error');
      }
      
      // Masquer le message apr√®s 5 secondes
      setTimeout(() => {
        messageDiv.className = 'form-message';
        messageDiv.textContent = '';
      }, 5000);
      
    } catch (error) {
      console.error('Erreur lors de l\'inscription:', error);
      messageDiv.textContent = 'Une erreur est survenue. Veuillez r√©essayer.';
      messageDiv.classList.add('error');
      submitButton.disabled = false;
      buttonSpan.textContent = originalButtonText || 'Essaie maintenant';
    }
  });
  }

  // Quiz Logic
  let currentQuestion = 0;
  const totalQuestions = 5;
  let quizData = {};

  function showQuiz() {
    const formSection = document.getElementById('formSection');
    const quizOverlay = document.getElementById('quizOverlay');
    
    if (formSection && quizOverlay) {
      // Hide form section
      formSection.style.display = 'none';
      
      // Show quiz overlay (popup)
      quizOverlay.style.display = 'flex';
      
      // Prevent body scroll when quiz is open
      document.body.style.overflow = 'hidden';
      
      // Show intro screen
      showQuestion(-1);
    }
  }

  function showQuestion(questionIndex) {
    // Hide all screens
    const screens = ['quizIntro', 'question1', 'question2', 'question3', 'question4', 'question5'];
    screens.forEach(screenId => {
      const screen = document.getElementById(screenId);
      if (screen) screen.style.display = 'none';
    });

    // Show current screen
    if (questionIndex === -1) {
      // Show intro
      const intro = document.getElementById('quizIntro');
      if (intro) {
        intro.style.display = 'block';
        updateProgress(0);
      }
    } else {
      // Show question
      const questionId = `question${questionIndex + 1}`;
      const question = document.getElementById(questionId);
      if (question) {
        question.style.display = 'block';
        updateProgress(questionIndex + 1);
        restoreAnswer(questionIndex);
      }
    }
  }

  function restoreAnswer(questionIndex) {
    // Restore answer for question 1 (objectif)
    if (questionIndex === 0 && quizData.objectif) {
      const radio = document.querySelector(`input[name="objectif"][value="${quizData.objectif}"]`);
      if (radio) radio.checked = true;
    }
    
    // Restore answer for question 2 (situation)
    if (questionIndex === 1 && quizData.situation) {
      const radio = document.querySelector(`input[name="situation"][value="${quizData.situation}"]`);
      if (radio) radio.checked = true;
    }
    
    // Restore answer for question 3 (fierte)
    if (questionIndex === 2 && quizData.fierte) {
      const textarea = document.getElementById('fierte');
      if (textarea) textarea.value = quizData.fierte;
    }
    
    // Restore answer for question 4 (reve)
    if (questionIndex === 3 && quizData.reve) {
      const textarea = document.getElementById('reve');
      if (textarea) textarea.value = quizData.reve;
    }
    
    // Restore answer for question 5 (souffrance)
    if (questionIndex === 4 && quizData.souffrance) {
      const textarea = document.getElementById('souffrance');
      if (textarea) textarea.value = quizData.souffrance;
    }
  }

  function updateProgress(questionNumber) {
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    
    if (progressFill && progressText) {
      const percentage = (questionNumber / totalQuestions) * 100;
      progressFill.style.width = `${percentage}%`;
      progressText.textContent = `${questionNumber}/${totalQuestions}`;
    }
  }

  async function saveQuizData() {
    const quizDataToSave = {
      objectif: quizData.objectif || '',
      situation: quizData.situation || '',
      fierte: quizData.fierte || '',
      reve: quizData.reve || '',
      souffrance: quizData.souffrance || '',
      completedAt: new Date().toISOString()
    };
    
    // Sauvegarder dans localStorage
    localStorage.setItem('quizData', JSON.stringify(quizDataToSave));
    
    // R√©cup√©rer email, pr√©nom et token depuis localStorage
    const email = localStorage.getItem('quizEmail') || '';
    const prenom = localStorage.getItem('quizPrenom') || '';
    const token = localStorage.getItem('cc_subscription_token') || '';
    
    // Pr√©parer les donn√©es √† envoyer
    const dataToSend = {
      email: email,
      prenom: prenom,
      objectif: quizDataToSave.objectif,
      situation: quizDataToSave.situation,
      fierte: quizDataToSave.fierte,
      reve: quizDataToSave.reve,
      souffrance: quizDataToSave.souffrance,
      completed_at: quizDataToSave.completedAt,
      token: token
    };
    
    // Envoyer √† Supabase
    try {
      // Log avant l'envoi
      console.log('Envoi Supabase...', dataToSend);
      
      // Charger dynamiquement Supabase depuis CDN (fonctionne c√¥t√© client)
      const { createClient } = await import('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm');
      
      const supabaseUrl = 'https://grjbxdraobvqkcdjkvhm.supabase.co';
      const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdyamJ4ZHJhb2J2cWtjZGprdmhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0OTM0NTAsImV4cCI6MjA4NDA2OTQ1MH0.RqOx2RfaUf4-JqJpol_TW7h6GD4ExIxJB4Q4jBY5XcQ';
      
      const supabase = createClient(supabaseUrl, supabaseAnonKey);
      
      const { data, error } = await supabase
        .from('quiz_responses')
        .insert(dataToSend);
      
      if (error) {
        // Log en cas d'erreur
        console.error('Supabase ERROR', error);
        // On continue quand m√™me la redirection m√™me si Supabase √©choue
      } else {
        // Log apr√®s succ√®s
        console.log('Supabase OK', data);
        
        // G√©n√©rer le contenu personnalis√© de la page via DeepSeek (non-bloquant)
        try {
          console.log('üé® G√©n√©ration contenu page pour:', email);
          
          const generateResponse = await fetch('/.netlify/functions/generate-page-content', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              email: email,
              quizData: {
                prenom: prenom,
                objectif: quizDataToSave.objectif,
                situation: quizDataToSave.situation,
                fierte: quizDataToSave.fierte,
                reve: quizDataToSave.reve,
                souffrance: quizDataToSave.souffrance
              }
            })
          });
          
          if (generateResponse.ok) {
            console.log('‚úÖ Contenu page stock√© dans Supabase');
          } else {
            const errorText = await generateResponse.text();
            console.error('‚ùå Erreur g√©n√©ration contenu page:', errorText);
          }
        } catch (genError) {
          // Ne pas bloquer la redirection si la g√©n√©ration √©choue
          console.log('‚ùå Erreur g√©n√©ration contenu page:', genError);
        }
      }
    } catch (error) {
      // Log en cas d'erreur de catch
      console.error('Supabase ERROR', error);
      // On continue quand m√™me la redirection m√™me si Supabase √©choue
    }
    
    // Restore body scroll
    document.body.style.overflow = '';
    
    // Rediriger vers la page de succ√®s
    window.location.href = '/court-circuit-success-2';
  }

  // Quiz Event Listeners
  const startQuizBtn = document.getElementById('startQuizBtn');
  if (startQuizBtn) {
    startQuizBtn.addEventListener('click', () => {
      currentQuestion = 0;
      showQuestion(0);
    });
  }

  // Question 1
  const nextBtn1 = document.getElementById('nextBtn1');
  const errorMsg1 = document.getElementById('errorMsg1');
  if (nextBtn1) {
    nextBtn1.addEventListener('click', () => {
      const selected = document.querySelector('input[name="objectif"]:checked');
      if (selected) {
        if (errorMsg1) errorMsg1.style.display = 'none';
        quizData.objectif = selected.value;
        currentQuestion = 1;
        showQuestion(1);
      } else {
        if (errorMsg1) errorMsg1.style.display = 'block';
      }
    });
  }

  // Hide error message when option is selected for question 1
  const objectifInputs = document.querySelectorAll('input[name="objectif"]');
  objectifInputs.forEach(input => {
    input.addEventListener('change', () => {
      if (errorMsg1) errorMsg1.style.display = 'none';
    });
  });

  // Question 2
  const nextBtn2 = document.getElementById('nextBtn2');
  const errorMsg2 = document.getElementById('errorMsg2');
  const prevBtn2 = document.getElementById('prevBtn2');
  if (nextBtn2) {
    nextBtn2.addEventListener('click', () => {
      const selected = document.querySelector('input[name="situation"]:checked');
      if (selected) {
        if (errorMsg2) errorMsg2.style.display = 'none';
        quizData.situation = selected.value;
        currentQuestion = 2;
        showQuestion(2);
      } else {
        if (errorMsg2) errorMsg2.style.display = 'block';
      }
    });
  }
  if (prevBtn2) {
    prevBtn2.addEventListener('click', () => {
      currentQuestion = 0;
      showQuestion(0);
    });
  }

  // Hide error message when option is selected for question 2
  const situationInputs = document.querySelectorAll('input[name="situation"]');
  situationInputs.forEach(input => {
    input.addEventListener('change', () => {
      if (errorMsg2) errorMsg2.style.display = 'none';
    });
  });

  // Question 3
  const nextBtn3 = document.getElementById('nextBtn3');
  const prevBtn3 = document.getElementById('prevBtn3');
  if (nextBtn3) {
    nextBtn3.addEventListener('click', () => {
      const textarea = document.getElementById('fierte');
      if (textarea && textarea.value.trim()) {
        quizData.fierte = textarea.value.trim();
        currentQuestion = 3;
        showQuestion(3);
      }
    });
  }
  if (prevBtn3) {
    prevBtn3.addEventListener('click', () => {
      const textarea = document.getElementById('fierte');
      if (textarea) quizData.fierte = textarea.value.trim();
      currentQuestion = 1;
      showQuestion(1);
    });
  }

  // Question 4
  const nextBtn4 = document.getElementById('nextBtn4');
  const prevBtn4 = document.getElementById('prevBtn4');
  if (nextBtn4) {
    nextBtn4.addEventListener('click', () => {
      const textarea = document.getElementById('reve');
      if (textarea && textarea.value.trim()) {
        quizData.reve = textarea.value.trim();
        currentQuestion = 4;
        showQuestion(4);
      }
    });
  }
  if (prevBtn4) {
    prevBtn4.addEventListener('click', () => {
      const textarea = document.getElementById('reve');
      if (textarea) quizData.reve = textarea.value.trim();
      currentQuestion = 2;
      showQuestion(2);
    });
  }

  // Question 5
  const nextBtn5 = document.getElementById('nextBtn5');
  const prevBtn5 = document.getElementById('prevBtn5');
  if (nextBtn5) {
    nextBtn5.addEventListener('click', () => {
      const textarea = document.getElementById('souffrance');
      if (textarea && textarea.value.trim()) {
        quizData.souffrance = textarea.value.trim();
        saveQuizData();
      }
    });
  }
  if (prevBtn5) {
    prevBtn5.addEventListener('click', () => {
      const textarea = document.getElementById('souffrance');
      if (textarea) quizData.souffrance = textarea.value.trim();
      currentQuestion = 3;
      showQuestion(3);
    });
  }
</script>


