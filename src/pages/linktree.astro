---
import GAConsentMode from '../components/GAConsentMode.astro';
const title = "Formations - Sonny Court";
const description = "D√©couvre nos formations pour ma√Ætriser ton subconscient et manifester tes d√©sirs. Manifest et Syst√®me Souhaits R√©alis√©s.";
---

<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- GA4 Consent Mode v2 -->
    <GAConsentMode />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={Astro.url.href} />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    
    <!-- Canonical -->
    <link rel="canonical" href={Astro.url.href} />
    
    <title>{title}</title>
  </head>
  <body>
    <div class="linktree-page">
      <!-- Background Effects -->
      <div class="background-effects">
        <div class="gradient-mesh"></div>
        <div class="depth-layers">
          <div class="depth-circle orb1"></div>
          <div class="depth-circle orb2"></div>
        </div>
      </div>

      <!-- Court-Circuit Optin Section -->
      <section class="optin-section">
        <div class="optin-container">
          <div class="optin-badge">
            <span>NewsLetter Court-Circuit</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="zap-icon">
              <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"/>
            </svg>
          </div>
          <h2>Re√ßois 1 email <span class="highlight">chaque matin</span> pour court-circuiter tes pens√©es limitantes</h2>
          <p class="optin-subtitle">Rejoins <span class="highlight">+10 000</span> lecteurs.</p>
          
          <form id="inscriptionForm" class="optin-form">
            <div class="form-row">
              <input 
                type="text" 
                id="name" 
                name="name" 
                required 
                placeholder="Ton pr√©nom"
              />
              <input 
                type="email" 
                id="email" 
                name="email" 
                required 
                placeholder="ton@email.com"
              />
              <button type="submit" class="submit-button">
                <span>S'inscrire</span>
              </button>
            </div>
            <div id="formMessage" class="form-message"></div>
          </form>
          
          <div class="badges-row">
            <span class="mini-badge">1 minute</span>
            <span class="mini-badge">1 id√©e</span>
            <span class="mini-badge">1 meme</span>
          </div>
        </div>
      </section>

      <!-- Separator -->
      <div class="section-separator">
        <span>Formations</span>
      </div>

      <!-- Formations Grid -->
      <section class="formations-grid">
        <div class="container">
          <!-- Formation 1: Esprit Subconscient -->
          <div class="formation-card">
            <div class="formation-image">
              <img src="/media/pages/Sonny-Court-Manifest-Formation-2.webp"
                   alt="Esprit Subconscient - Sonny Court"
                   loading="lazy"
                   decoding="async" />
            </div>
            <div class="formation-content">
              <div class="formation-header">
                <h3>Esprit Subconscient</h3>
                <span class="level-badge level-1">NIVEAU 1</span>
              </div>
              <p class="formation-description">
                21 jours pour reprogrammer ton subconscient et te lib√©rer de tes blocages inconscients
              </p>
              <a href="/es-inscription" class="cta-button">
                Voir vid√©o gratuite
              </a>
            </div>
          </div>

          <!-- Formation 2: Manifest -->
          <div class="formation-card">
            <div class="formation-image">
              <img src="https://i1.wp.com/sonnycourt.com/wp-content/uploads/2025/07/Sonny-Court-Manifest-Formation.webp"
                   alt="Formation MANIFEST - Sonny Court"
                   loading="lazy"
                   decoding="async" />
            </div>
            <div class="formation-content">
              <div class="formation-header">
                <h3>MANIFEST</h3>
                <span class="level-badge level-2">NIVEAU 2</span>
              </div>
              <p class="formation-description">
                D√©couvre les techniques de manifestation oubli√©es pour transformer tes r√™ves en r√©alit√©
              </p>
              <a href="/inscription-manifest" class="cta-button">
                Voir vid√©o gratuite
              </a>
            </div>
          </div>

          <!-- Formation 3: Syst√®me Souhaits R√©alis√©s -->
          <div class="formation-card">
            <div class="formation-image">
              <img src="https://sonnycourt-videos-public.b-cdn.net/Sonny-pack-Neville-cover-vf.webp"
                   alt="Formation Syst√®me Souhaits R√©alis√©s - Sonny Court"
                   loading="lazy"
                   decoding="async" />
            </div>
            <div class="formation-content">
              <div class="formation-header">
                <h3>Syst√®me Souhaits R√©alis√©s</h3>
                <span class="level-badge immersion">IMMERSION</span>
              </div>
              <p class="formation-description">
                Transforme tes souhaits en r√©alit√© gr√¢ce √† la reprogrammation subconsciente bas√©e sur Neville Goddard
              </p>
              <a href="/ssr-access" class="cta-button">
                Voir vid√©o gratuite
              </a>
            </div>
          </div>

          <!-- Formation 4: Syst√®me Viral -->
          <div class="formation-card">
            <div class="formation-image">
              <img src="/media/sonny_systeme-viral.webp"
                   alt="Formation Syst√®me Viral - Sonny Court"
                   loading="lazy"
                   decoding="async" />
            </div>
            <div class="formation-content">
              <div class="formation-header">
                <h3>Syst√®me Viral</h3>
                <span class="level-badge business">BUSINESS</span>
              </div>
              <p class="formation-description">
                Transforme des vid√©os courtes en machine √† revenus et deviens viral sur les r√©seaux sociaux
              </p>
              <a href="https://systemeviral.com/inscription/" class="cta-button cta-button-green">
                Voir vid√©o gratuite
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- Social Proof Section -->
      <section class="social-section">
        <div class="social-container">
          <div class="social-header">
            <span class="social-total">4M+</span>
            <span class="social-title">abonn√©s sur les r√©seaux</span>
          </div>
          <div class="social-grid">
            <a href="https://youtube.com/@sonnycourt" target="_blank" rel="noopener" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"/>
                <path d="m10 15 5-3-5-3z"/>
              </svg>
              <span class="social-count">2M+</span>
            </a>
            <span class="social-separator">‚Ä¢</span>
            <a href="https://facebook.com/sonnycourt" target="_blank" rel="noopener" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
              </svg>
              <span class="social-count">987K+</span>
            </a>
            <span class="social-separator">‚Ä¢</span>
            <a href="https://tiktok.com/@sonnycourt" target="_blank" rel="noopener" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"/>
              </svg>
              <span class="social-count">570K+</span>
            </a>
            <span class="social-separator">‚Ä¢</span>
            <a href="https://instagram.com/sonnycourt" target="_blank" rel="noopener" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/>
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/>
              </svg>
              <span class="social-count">350K+</span>
            </a>
          </div>
        </div>
      </section>

    </div>
  </body>
</html>

<style is:global>
  html {
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', sans-serif;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  * {
    box-sizing: border-box;
  }
  
  body {
    margin: 0;
    padding: 0;
    background: #0a0a0a;
  }
</style>

<style>
  .linktree-page {
    min-height: 100vh;
    padding: 40px 20px 60px;
    position: relative;
  }

  /* Background Effects */
  .background-effects {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .gradient-mesh {
    position: fixed;
    width: 200vw;
    height: 300vh;
    top: -50vh;
    left: -50vw;
    background: 
      radial-gradient(circle at 20% 30%, rgba(0, 122, 255, 0.15) 0%, transparent 60%),
      radial-gradient(circle at 80% 70%, rgba(0, 122, 255, 0.08) 0%, transparent 70%),
      radial-gradient(circle at 40% 20%, rgba(0, 122, 255, 0.05) 0%, transparent 80%),
      radial-gradient(circle at 60% 80%, rgba(0, 122, 255, 0.03) 0%, transparent 90%);
    filter: blur(60px);
    opacity: 0.7;
    animation: meshMove 40s ease-in-out infinite;
  }

  @keyframes meshMove {
    0%, 100% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(-5%, -5%) scale(1.05); }
    50% { transform: translate(5%, 5%) scale(1.1); }
    75% { transform: translate(-3%, 3%) scale(1.05); }
  }

  .depth-layers {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .depth-circle {
    position: absolute;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0.4;
    animation: orbFloat 20s ease-in-out infinite;
  }

  .orb1 {
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(0, 122, 255, 0.6) 0%, transparent 70%);
    top: 10%;
    left: 10%;
  }

  .orb2 {
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, rgba(0, 81, 213, 0.5) 0%, transparent 70%);
    bottom: 10%;
    right: 10%;
    animation-delay: 10s;
  }

  @keyframes orbFloat {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(50px, -50px) scale(1.1); }
  }

  /* Optin Section */
  .optin-section {
    position: relative;
    z-index: 1;
    max-width: 700px;
    margin: 0 auto 40px;
  }

  .optin-container {
    background: rgba(22, 33, 62, 0.4);
    border: 1px solid rgba(0, 122, 255, 0.3);
    border-radius: 24px;
    padding: 32px;
    backdrop-filter: blur(20px);
    box-shadow: 
      0 8px 32px rgba(0, 122, 255, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    text-align: center;
  }

  .optin-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(22, 33, 62, 0.4);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(0, 122, 255, 0.3);
    border-radius: 50px;
    color: #007AFF;
    font-weight: 600;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 20px;
  }

  .zap-icon {
    animation: zapPulse 2s ease-in-out infinite;
  }

  @keyframes zapPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.1); }
  }

  .optin-container h2 {
    font-size: clamp(1.3rem, 4vw, 1.8rem);
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 8px;
    line-height: 1.3;
  }

  .optin-container h2 .highlight,
  .optin-subtitle .highlight {
    color: #007AFF;
    background: linear-gradient(135deg, #007AFF 0%, #0051D5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .optin-subtitle {
    color: #a0a0a0;
    margin-bottom: 24px;
    font-size: 1rem;
  }

  .optin-form {
    margin-bottom: 20px;
  }

  .form-row {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .form-row input {
    flex: 1;
    min-width: 150px;
    max-width: 200px;
    padding: 14px 18px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    color: #ffffff;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    font-family: inherit;
  }

  .form-row input::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }

  .form-row input:focus {
    outline: none;
    border-color: #007AFF;
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.15);
  }

  .submit-button {
    padding: 14px 28px;
    background: linear-gradient(135deg, #007AFF 0%, #0051D5 100%);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 6px 20px rgba(0, 122, 255, 0.3);
    white-space: nowrap;
  }

  .submit-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0, 122, 255, 0.5);
  }

  .form-message {
    margin-top: 16px;
    padding: 12px;
    border-radius: 10px;
    text-align: center;
    font-weight: 500;
    display: none;
  }

  .form-message.success {
    display: block;
    background: rgba(34, 197, 94, 0.2);
    border: 1px solid rgba(34, 197, 94, 0.4);
    color: #4ade80;
  }

  .form-message.error {
    display: block;
    background: rgba(239, 68, 68, 0.2);
    border: 1px solid rgba(239, 68, 68, 0.4);
    color: #f87171;
  }

  .badges-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
  }

  .mini-badge {
    padding: 8px 16px;
    background: linear-gradient(135deg, rgba(0, 122, 255, 0.1) 0%, rgba(0, 81, 213, 0.15) 100%);
    border: 1px solid rgba(0, 122, 255, 0.3);
    border-radius: 50px;
    color: #007AFF;
    font-weight: 600;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Section Separator */
  .section-separator {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    max-width: 700px;
    margin: 0 auto 40px;
    padding: 0 20px;
  }

  .section-separator::before,
  .section-separator::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  }

  .section-separator span {
    padding: 0 20px;
    color: #8E8E93;
    font-size: 0.9rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 2px;
  }

  /* Formations Grid */
  .formations-grid {
    position: relative;
    z-index: 1;
  }

  .formations-grid .container {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .formation-card {
    background: rgba(28, 28, 30, 0.8);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    display: flex;
    flex-direction: row;
    align-items: center;
  }

  .formation-card:hover {
    transform: translateY(-4px);
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.1);
    border-color: rgba(0, 122, 255, 0.3);
  }

  .formation-image {
    width: 160px;
    min-width: 160px;
    height: 160px;
    background: linear-gradient(135deg, #2C2C2E, #1C1C1E);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }

  .formation-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    transition: transform 0.3s ease;
  }

  .formation-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
    flex-wrap: wrap;
  }

  .formation-content h3 {
    font-size: 1.4rem;
    font-weight: 700;
    color: #FFFFFF;
    margin: 0;
    letter-spacing: -0.02em;
  }

  .level-badge {
    padding: 4px 10px;
    border-radius: 50px;
    font-size: 9px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
  }

  .level-badge.level-1 {
    background: rgba(59, 130, 246, 0.15);
    color: #60a5fa;
    border: 1px solid rgba(59, 130, 246, 0.3);
  }

  .level-badge.level-2 {
    background: rgba(139, 92, 246, 0.15);
    color: #a78bfa;
    border: 1px solid rgba(139, 92, 246, 0.3);
  }

  .level-badge.immersion {
    background: rgba(251, 191, 36, 0.15);
    color: #fbbf24;
    border: 1px solid rgba(251, 191, 36, 0.3);
  }

  .level-badge.business {
    background: rgba(52, 199, 89, 0.15);
    color: #34C759;
    border: 1px solid rgba(52, 199, 89, 0.3);
  }

  .cta-button-green {
    background: linear-gradient(135deg, #34C759 0%, #30D158 100%);
  }

  .cta-button-green:hover {
    background: linear-gradient(135deg, #30D158 0%, #28A745 100%);
    box-shadow: 0 8px 24px rgba(52, 199, 89, 0.3);
  }

  .formation-card:hover .formation-image img {
    transform: scale(1.05);
  }

  .formation-content {
    flex: 1;
    padding: 24px;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .formation-description {
    color: #8E8E93;
    line-height: 1.5;
    margin: 0 0 16px 0;
    font-size: 0.95rem;
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 24px;
    background: linear-gradient(135deg, #007AFF 0%, #0051D5 100%);
    color: #FFFFFF;
    text-decoration: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    width: fit-content;
  }

  .cta-button:hover {
    background: linear-gradient(135deg, #0051D5 0%, #0039A6 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
  }

  /* Social Section */
  .social-section {
    position: relative;
    z-index: 1;
    max-width: 700px;
    margin: 50px auto 0;
  }

  .social-container {
    background: rgba(22, 33, 62, 0.3);
    border: 1px solid rgba(0, 122, 255, 0.15);
    border-radius: 20px;
    padding: 28px 32px;
    backdrop-filter: blur(20px);
    text-align: center;
  }

  .social-header {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
  }

  .social-total {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, #007AFF 0%, #0051D5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .social-title {
    color: #8E8E93;
    font-size: 1rem;
    font-weight: 500;
  }

  .social-grid {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    flex-wrap: wrap;
  }

  .social-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 50px;
    text-decoration: none;
    transition: all 0.3s ease;
    color: #8E8E93;
  }

  .social-link:hover {
    background: rgba(0, 122, 255, 0.1);
    border-color: rgba(0, 122, 255, 0.3);
    color: #007AFF;
    transform: translateY(-2px);
  }

  .social-link svg {
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }

  .social-link:hover svg {
    opacity: 1;
  }

  .social-count {
    font-size: 0.9rem;
    font-weight: 600;
    color: #ffffff;
  }

  .social-separator {
    color: rgba(255, 255, 255, 0.15);
    font-size: 0.6rem;
  }

  /* Mobile Optimization */
  @media (max-width: 640px) {
    .linktree-page {
      padding: 30px 16px 50px;
    }

    .optin-container {
      padding: 24px 20px;
    }

    .optin-container h2 {
      font-size: 1.2rem;
    }

    .form-row {
      flex-direction: column;
      align-items: stretch;
    }

    .form-row input {
      max-width: none;
      width: 100%;
    }

    .submit-button {
      width: 100%;
    }

    .formation-card {
      flex-direction: column;
    }

    .formation-image {
      width: 100%;
      min-width: auto;
      height: auto;
      aspect-ratio: 16 / 9;
    }

    .formation-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }

    .formation-content {
      padding: 20px;
    }

    .formation-content h3 {
      font-size: 1.25rem;
    }

    .cta-button {
      width: 100%;
      text-align: center;
    }

    .social-section {
      margin-top: 40px;
    }

    .social-container {
      padding: 24px 20px;
    }

    .social-header {
      flex-direction: column;
      gap: 4px;
    }

    .social-total {
      font-size: 1.8rem;
    }

    .social-title {
      font-size: 0.9rem;
    }

    .social-grid {
      gap: 6px;
    }

    .social-link {
      padding: 8px 12px;
    }

    .social-separator {
      display: none;
    }
  }
</style>

<script>
  const form = document.getElementById('inscriptionForm') as HTMLFormElement | null;
  const messageDiv = document.getElementById('formMessage') as HTMLElement | null;

  if (form && messageDiv) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(form);
      
      const data = {
        email: formData.get('email'),
        prenom: formData.get('name'),
        groupId: '173790390929851793'
      };

      // R√©initialiser le message
      messageDiv.className = 'form-message';
      messageDiv.textContent = '';

      // D√©sactiver le bouton pendant l'envoi
      const submitButton = form.querySelector('.submit-button') as HTMLButtonElement | null;
      if (!submitButton) return;
      
      const buttonSpan = submitButton.querySelector('span') as HTMLElement | null;
      if (!buttonSpan) return;
      
      const originalButtonText = buttonSpan.textContent;
      submitButton.disabled = true;
      buttonSpan.textContent = 'Envoi...';

      try {
        // V√©rifier si on est en local ou en production
        const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        
        if (isLocal) {
          // Simulation en local
          await new Promise(resolve => setTimeout(resolve, 1500));
          console.log('üß™ Mode local : Simulation d\'inscription', data);
          window.location.href = '/court-circuit-success';
          return;
        }

        // Appel √† l'API MailerLite via Netlify Function
        const response = await fetch('/.netlify/functions/subscribe', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });

        // R√©activer le bouton
        submitButton.disabled = false;
        buttonSpan.textContent = originalButtonText || 'S\'inscrire';

        if (response.ok) {
          // Appel au webhook n8n
          try {
            await fetch('https://n8n.sonnycourt.com/webhook/ebe808c2-e48d-4052-b229-a55e642f3841', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                email: formData.get('email'),
                name: formData.get('name')
              })
            });
          } catch (webhookError) {
            console.error('Erreur webhook n8n:', webhookError);
          }
          
          // Rediriger vers la page de succ√®s
          window.location.href = '/court-circuit-success';
        } else {
          const result = await response.json().catch(() => ({}));
          messageDiv.textContent = result.message || result.error || 'Une erreur est survenue. Veuillez r√©essayer.';
          messageDiv.classList.add('error');
        }
        
        // Masquer le message apr√®s 5 secondes
        setTimeout(() => {
          messageDiv.className = 'form-message';
          messageDiv.textContent = '';
        }, 5000);
        
      } catch (error) {
        console.error('Erreur lors de l\'inscription:', error);
        messageDiv.textContent = 'Une erreur est survenue. Veuillez r√©essayer.';
        messageDiv.classList.add('error');
        submitButton.disabled = false;
        buttonSpan.textContent = originalButtonText || 'S\'inscrire';
      }
    });
  }
</script>
